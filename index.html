<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css" integrity="sha256-2H3fkXt6FEmrReK448mDVGKb3WW2ZZw35gI7vqHOE4Y=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{&quot;hostname&quot;:&quot;example.com&quot;,&quot;root&quot;:&quot;&#x2F;&quot;,&quot;images&quot;:&quot;&#x2F;images&quot;,&quot;scheme&quot;:&quot;Muse&quot;,&quot;version&quot;:&quot;8.5.0&quot;,&quot;exturl&quot;:false,&quot;sidebar&quot;:{&quot;position&quot;:&quot;left&quot;,&quot;display&quot;:&quot;post&quot;,&quot;padding&quot;:18,&quot;offset&quot;:12},&quot;copycode&quot;:false,&quot;bookmark&quot;:{&quot;enable&quot;:false,&quot;color&quot;:&quot;#222&quot;,&quot;save&quot;:&quot;auto&quot;},&quot;fancybox&quot;:false,&quot;mediumzoom&quot;:false,&quot;lazyload&quot;:false,&quot;pangu&quot;:false,&quot;comments&quot;:{&quot;style&quot;:&quot;tabs&quot;,&quot;active&quot;:null,&quot;storage&quot;:true,&quot;lazyload&quot;:false,&quot;nav&quot;:null},&quot;motion&quot;:{&quot;enable&quot;:true,&quot;async&quot;:false,&quot;transition&quot;:{&quot;post_block&quot;:&quot;fadeIn&quot;,&quot;post_header&quot;:&quot;fadeInDown&quot;,&quot;post_body&quot;:&quot;fadeInDown&quot;,&quot;coll_header&quot;:&quot;fadeInLeft&quot;,&quot;sidebar&quot;:&quot;fadeInUp&quot;}},&quot;prism&quot;:false,&quot;i18n&quot;:{&quot;placeholder&quot;:&quot;Searching...&quot;,&quot;empty&quot;:&quot;We didn&#39;t find any results for the search: ${query}&quot;,&quot;hits_time&quot;:&quot;${hits} results found in ${time} ms&quot;,&quot;hits&quot;:&quot;${hits} results found&quot;}}</script><script src="/js/config.js"></script>
<meta property="og:type" content="website">
<meta property="og:title" content="Think like a man of action, act like a man of thought.">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Think like a man of action, act like a man of thought.">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Starr">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/">



<script class="next-config" data-name="page" type="application/json">{&quot;sidebar&quot;:&quot;&quot;,&quot;isHome&quot;:true,&quot;isPost&quot;:false,&quot;lang&quot;:&quot;en&quot;,&quot;comments&quot;:&quot;&quot;,&quot;permalink&quot;:&quot;&quot;,&quot;path&quot;:&quot;index.html&quot;,&quot;title&quot;:&quot;&quot;}</script>

<script class="next-config" data-name="calendar" type="application/json">&quot;&quot;</script>
<title>Think like a man of action, act like a man of thought.</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Think like a man of action, act like a man of thought.</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-overview">
            <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Starr</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">3</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



          </div>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/06/23/how-to-generate-a-measurement-report-using-3d-reconstruction/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Starr">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Think like a man of action, act like a man of thought.">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/06/23/how-to-generate-a-measurement-report-using-3d-reconstruction/" class="post-title-link" itemprop="url">三维重建技术简介</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-06-23 10:24:28 / Modified: 15:31:34" itemprop="dateCreated datePublished" datetime="2021-06-23T10:24:28+08:00">2021-06-23</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="三维重建"><a href="#三维重建" class="headerlink" title="三维重建"></a>三维重建</h3><p>三维重建技术是只利用二维投影或影像来恢复物体的三维信息的数学过程和计算机技术。 计算机视觉中的三维重建主要是指，利用传感器设备(摄像机)获取现实世界的图像信息，获取现实场景的深度信息，从而重建原始三维信息的过程。</p>
<ol>
<li>Structure From Motion(SFM:从运动中恢复结果)<br>从运动中恢复结构是从一系列图像的投影中，重建3D结构的过程。输入是从不同视点获取的同一对象的一组重叠对象。 输出是对象的3D重建，以及重建的所有图像的内在和外在相机参数。</li>
</ol>
<p><img src="incremental-sfm.png" alt="img.png"><br>colmap的三维重建的流水线</p>
<p>通常情况下，SFM系统将次过程分为三个阶段:</p>
<ul>
<li><p>特征检测和提取 第一步: 特征检测和提取是找到图像中的稀疏特征点,并用数字描述子描述他们的外观. 第二步: 你必须确定你的相机内参模型(?)<br>此过程称为相机标定其目的是为了确定空间物体表面某点的三维几何位置与其在图像中对应点之间的相互关系， 必须建立摄像机成像的几何模型,这些几何模型参数就是摄像机参数。求解参数的过程称之为摄像机标定。(此处省略.)</p>
</li>
<li><p>特征匹配和几何验证 特征匹配和几何验证是在不同的图片的特征点中对应关系。 有以下几种特征匹配模式，对应不同的场景:</p>
<ul>
<li>穷举匹配 如果图片数量不多(高达几百张)时，这种模式应该能最快并且有最好的重建效果。</li>
<li>顺序匹配算法 如果图像是按顺序获取的，例如通过摄像机，则此模式很有用。</li>
<li>词汇树匹配算法 在这种匹配模式中，每个图像都使用具有空间重新排序的词汇树与其视觉最近邻进行匹配。</li>
<li>空间匹配算法 这种匹配模式将每个图像与其空间最近邻进行匹配。</li>
<li>转移匹配算法 这种匹配模式利用已经存在的特征匹配的传递关系来生成更完整的匹配图。</li>
<li>自定义匹配算法 此模式允许指定单个图像对 进行匹配或导入单个特征匹配。 在完成特征提取和匹配后,生成了场景图，保存在数据库中。</li>
</ul>
</li>
<li><p>结构和运动重建</p>
<ul>
<li><p>稀疏重建 在前两步生成场景图后，colmap开始增量重建过程。 首先将所有从数据库中提取的数据加载到内存中，并从初始图像对 开始重建。 然后，通过配准新图像和三角测量新点 来逐步扩展场景。</p>
<p>bundle Adjustment 光束法平差 光束指的是三维空间中的点投影到像平面上的光束。 测量平差:由于测量仪器的精度不完善和人为因素及外界条件的影响，测量误差总是不可避免的。<br>为了提高成果的质量，处理好这些测量中存在的误差问题，观测值的个数往往要多于确定未知量所必须观测的个数， 也就是要进行多余观测。有了多余观测，势必在观测结果之间产生矛盾，<br>测量平差的目的就在于消除这些矛盾而求得观测量的最可靠结果并评定测量成果的精度。 测量平差采用的原理就是“最小二乘法”。 BA的本质是一个优化模型，其目的是最小化重投影误差.</p>
</li>
<li><p>密集重建<br>在重建场景的稀疏表示和输入图像的相机位姿后,MVS现在可以恢复更密集的场景几何了。</p>
</li>
</ul>
</li>
</ul>
<ol start="2">
<li>Multi-View Stereo(MVS: 多视图立体视觉)<br>多视图立体视觉使用SFM的输出来计算图像中每个像素的深度和法线图.3D中多个图像的深度和法线图的融合产生场景的密集点云。 利用融合后的点云的深度、法线图，以及泊松表面重建等算法来恢复场景的3D表面几何形状。</li>
</ol>
<ul>
<li>第一步是图像不失真</li>
<li>第二步使用立体计算深度和法线图</li>
<li>第三步将深度和法线图融合到点云中</li>
<li>第四步进行点云网格划分 最终生成ply文件，可以用meshlab软件打开，进行查看或者调整。</li>
</ul>
<h3 id="点云处理"><a href="#点云处理" class="headerlink" title="点云处理"></a>点云处理</h3><ol>
<li>识别点云范围<br>将点云的GPS信息转换成经纬度在转换成ECEF坐标，以米为单位.<br>用DBSCAN算法对点云进行聚类，设置聚类最小的数量为n,小于n的点将不聚类<br>去掉不需要的点云以便降低计算复杂度</li>
<li>点云分割<br>根据需求对点云进行partition,比如点云超过m个,长度超过l,就沿着某条边，再对每个聚类分成两半;</li>
</ol>
<h3 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h3><p>本文信息来源于colmap的官方文档</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://colmap.github.io/">https://colmap.github.io/</a></p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/06/22/image-classifier/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Starr">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Think like a man of action, act like a man of thought.">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/06/22/image-classifier/" class="post-title-link" itemprop="url">卷积神经网络预测手写体数字</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-06-22 16:46:24 / Modified: 21:05:35" itemprop="dateCreated datePublished" datetime="2021-06-22T16:46:24+08:00">2021-06-22</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="用卷积卷积神经网络预测手写体数字"><a href="#用卷积卷积神经网络预测手写体数字" class="headerlink" title="用卷积卷积神经网络预测手写体数字"></a>用卷积卷积神经网络预测手写体数字</h3><h4 id="感知机"><a href="#感知机" class="headerlink" title="感知机"></a>感知机</h4><p>感知机是生物神经网络的简单抽象。我们先看看神经细胞是怎么工作的。 神经细胞结构大致可分为：树突、突触、细胞体及轴突。单个神经细胞可被视为一种只有两种状态的 机器——激动时为是，而未激动时为否。<br>神经细胞的状态取决于从其它的神经细胞收到的输入信号量，及突触的强度（抑制或加强）。 当信号量总和超过了某个阈值时，细胞体就会激动，产生电脉冲。电脉冲沿着轴突并通过突触传递到其它神经元。<br>为了模拟神经细胞行为，与之对应的感知机基础概念被提出，如权量（突触）、偏置（阈值）及激活函数（细胞体）。 感知机也被称为是”单层的”人工神经网络, 是一种二元线性分类器。</p>
<h4 id="神经网络"><a href="#神经网络" class="headerlink" title="神经网络"></a>神经网络</h4><p>在机器学习和认知科学领域，人工神经网络（ANN），简称神经网络（NN）是一种模仿生物神经网络 （动物的中枢神经系统，特别是大脑）的结构和功能的数学模型或计算模型，用于对函数进行估计或近似。<br>神经网络是多层神经元的连接，上一层神经元的输出，作为下一层神经元的输入。</p>
<ol>
<li>线性不可分</li>
<li>激活函数<br>为了实现神经网络的非线性建模能力，解决一些线性不可分的问题，我们通常使用激活函数 来引入非线性因素。激活函数都采用非线性函数，常用的有Sigmoid、tanh、ReLU等.</li>
<li>全连接层<br>全连接层是一种对输入数据直接做线性变换的线性计算层。它是神经网络中最常用的一种层， 用于学习输出数据和输入数据之间的变换关系。全连接层可作为特征提取层使用，在学习特<br>征的同时实现特征融合；也可作为最终的分类层使用，其输出神经元的值代表了每个输出类 别的概率。</li>
<li>后向传播<br>BP算法的基本思想是通过损失函数对模型参数进行求导， 并根据复合函数求导常用的“链式法则”将不同层的模型参 数的梯度联系起来，使得计算所有模型参数的梯度更简单。</li>
</ol>
<h4 id="卷积神经网络"><a href="#卷积神经网络" class="headerlink" title="卷积神经网络"></a>卷积神经网络</h4><p>CNN模型是一种以卷积为核心的前馈神经网络模型。 20世纪60年代，Hubel和Wiesel在研究猫脑 皮层中用于局部敏感和方向选择的神经元时发现其独特的网络结构可以有效地降低反馈神经网<br>络的复杂性，继而提出了卷积神经网络（Convolutional Neural Networks，简称CNN）。</p>
<ol>
<li>卷积<br>卷积是分析数学中的一种基础运算，其中对输入数据做运算时所用到的函数称为卷积核。</li>
<li>卷积层<br>卷积层是使用一系列卷积核与多通道输入数据做卷积的线性计算层。卷积层的提出是为了利用 输入数据（如图像）中特征的局域性和位置无关性来降低整个模型的参数量。卷积运算过程与<br>图像处理算法中常用的空间滤波是类似的。因此，卷积常常被通俗地理解为一种“滤波”过程， 卷积核与输入数据作用之后得到了“滤波”后的图像，从而提取出了图像的特征。</li>
<li>池化层<br>池化层是用于缩小数据规模的一种非线性计算层。为了降低特征维度，我们需要对输入数据进 行采样，具体做法是在一个或者多个卷积层后增加一个池化层。池化层由三个参数决定：（1）<br>池化类型，一般有最大池化和平均池化两种；（2）池化核的大小k；（3）池化核的滑动间隔s。 下图给出了一种的池化层示例。其中，2x2大小的池化窗口以2个单位距离在输入数据上滑动。<br>在池化层中，如果采用最大池化类型，则输出为输入窗口内四个值的最大值；如采用平均池化 类型，则输出为输入窗口内四个值的平均值</li>
<li>Dropout层<br>Dropout 是常用的一种正则化方法，Dropout层是一种正则化层。全连接层参数量非常庞大（占 据了CNN模型参数量的80%～90%左右），发生过拟合问题的风险比较高，所以我们通常需要<br>一些正则化方法训练带有全连接层的CNN模型。在每次迭代训练时，将神经元以一定的概率值 暂时随机丢弃，即在当前迭代中不参与训练。</li>
<li>Flatten<br>将卷积和池化后提取的特征摊平后输入全连接网络，这里与 MNIST softmax 网络的输入层类似。</li>
</ol>
<h4 id="实践"><a href="#实践" class="headerlink" title="实践"></a>实践</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># deeper cnn model for mnist</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> keras</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot</span><br><span class="line"></span><br><span class="line">mnist_path = <span class="string">&quot;mnist/mnist.npz&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># load train and test dataset</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">load_dataset</span>():</span></span><br><span class="line">    <span class="comment"># load dataset</span></span><br><span class="line">    (trainX, trainY), (testX, testY) = keras.datasets.mnist.load_data(mnist_path)</span><br><span class="line">    <span class="comment"># reshape dataset to have a single channel</span></span><br><span class="line">    trainX = trainX.reshape((trainX.shape[<span class="number">0</span>], <span class="number">28</span>, <span class="number">28</span>, <span class="number">1</span>))</span><br><span class="line">    testX = testX.reshape((testX.shape[<span class="number">0</span>], <span class="number">28</span>, <span class="number">28</span>, <span class="number">1</span>))</span><br><span class="line">    <span class="comment"># one hot encode target values</span></span><br><span class="line">    trainY = keras.to_categorical(trainY)</span><br><span class="line">    testY = keras.to_categorical(testY)</span><br><span class="line">    <span class="keyword">return</span> trainX, trainY, testX, testY</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># normalize</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">prep_pixels</span>(<span class="params">train, test</span>):</span></span><br><span class="line">    <span class="comment"># convert from integers to floats</span></span><br><span class="line">    train_norm = train.astype(<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">    test_norm = test.astype(<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">    <span class="comment"># normalize to range 0-1</span></span><br><span class="line">    train_norm = train_norm / <span class="number">255.0</span></span><br><span class="line">    test_norm = test_norm / <span class="number">255.0</span></span><br><span class="line">    <span class="comment"># return normalized images</span></span><br><span class="line">    <span class="keyword">return</span> train_norm, test_norm</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># define cnn model</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">define_model</span>():</span></span><br><span class="line">    model = keras.Sequential()</span><br><span class="line">    model.add(keras.Conv2D(<span class="number">32</span>, (<span class="number">3</span>, <span class="number">3</span>), activation=<span class="string">&#x27;relu&#x27;</span>, kernel_initializer=<span class="string">&#x27;he_uniform&#x27;</span>, input_shape=(<span class="number">28</span>, <span class="number">28</span>, <span class="number">1</span>)))</span><br><span class="line">    model.add(keras.MaxPooling2D((<span class="number">2</span>, <span class="number">2</span>)))</span><br><span class="line">    model.add(keras.Conv2D(<span class="number">64</span>, (<span class="number">3</span>, <span class="number">3</span>), activation=<span class="string">&#x27;relu&#x27;</span>, kernel_initializer=<span class="string">&#x27;he_uniform&#x27;</span>))</span><br><span class="line">    model.add(keras.Conv2D(<span class="number">64</span>, (<span class="number">3</span>, <span class="number">3</span>), activation=<span class="string">&#x27;relu&#x27;</span>, kernel_initializer=<span class="string">&#x27;he_uniform&#x27;</span>))</span><br><span class="line">    model.add(keras.MaxPooling2D((<span class="number">2</span>, <span class="number">2</span>)))</span><br><span class="line">    model.add(keras.Flatten())</span><br><span class="line">    model.add(keras.Dense(<span class="number">100</span>, activation=<span class="string">&#x27;relu&#x27;</span>, kernel_initializer=<span class="string">&#x27;he_uniform&#x27;</span>))</span><br><span class="line">    model.add(keras.Dense(<span class="number">10</span>, activation=<span class="string">&#x27;softmax&#x27;</span>))</span><br><span class="line">    <span class="comment"># compile model</span></span><br><span class="line">    opt = keras.SGD(lr=<span class="number">0.01</span>, momentum=<span class="number">0.9</span>)</span><br><span class="line">    model.<span class="built_in">compile</span>(optimizer=opt, loss=<span class="string">&#x27;categorical_crossentropy&#x27;</span>, metrics=[<span class="string">&#x27;accuracy&#x27;</span>])</span><br><span class="line">    <span class="keyword">return</span> model</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># evaluate a model using k-fold cross-validation</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">evaluate_model</span>(<span class="params">dataX, dataY, n_folds=<span class="number">5</span></span>):</span></span><br><span class="line">    scores, histories = <span class="built_in">list</span>(), <span class="built_in">list</span>()</span><br><span class="line">    <span class="comment"># prepare cross validation</span></span><br><span class="line">    kfold = keras.KFold(n_folds, shuffle=<span class="literal">True</span>, random_state=<span class="number">1</span>)</span><br><span class="line">    <span class="comment"># enumerate splits</span></span><br><span class="line">    <span class="keyword">for</span> train_ix, test_ix <span class="keyword">in</span> kfold.split(dataX):</span><br><span class="line">        <span class="comment"># define model</span></span><br><span class="line">        model = define_model()</span><br><span class="line">        <span class="comment"># select rows for train and test</span></span><br><span class="line">        trainX, trainY, testX, testY = dataX[train_ix], dataY[train_ix], dataX[test_ix], dataY[test_ix]</span><br><span class="line">        <span class="comment"># fit model</span></span><br><span class="line">        history = model.fit(trainX, trainY, epochs=<span class="number">10</span>, batch_size=<span class="number">32</span>, validation_data=(testX, testY), verbose=<span class="number">0</span>)</span><br><span class="line">        <span class="comment"># evaluate model</span></span><br><span class="line">        _, acc = model.evaluate(testX, testY, verbose=<span class="number">0</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;&gt; %.3f&#x27;</span> % (acc * <span class="number">100.0</span>))</span><br><span class="line">        <span class="comment"># stores scores</span></span><br><span class="line">        scores.append(acc)</span><br><span class="line">        histories.append(history)</span><br><span class="line">    <span class="keyword">return</span> scores, histories</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># plot diagnostic learning curves</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">summarize_diagnostics</span>(<span class="params">histories</span>):</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(histories)):</span><br><span class="line">        <span class="comment"># plot loss</span></span><br><span class="line">        pyplot.subplot(<span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">        pyplot.title(<span class="string">&#x27;Cross Entropy Loss&#x27;</span>)</span><br><span class="line">        pyplot.plot(histories[i].history[<span class="string">&#x27;loss&#x27;</span>], color=<span class="string">&#x27;blue&#x27;</span>, label=<span class="string">&#x27;train&#x27;</span>)</span><br><span class="line">        pyplot.plot(histories[i].history[<span class="string">&#x27;val_loss&#x27;</span>], color=<span class="string">&#x27;orange&#x27;</span>, label=<span class="string">&#x27;test&#x27;</span>)</span><br><span class="line">        <span class="comment"># plot accuracy</span></span><br><span class="line">        pyplot.subplot(<span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">        pyplot.title(<span class="string">&#x27;Classification Accuracy&#x27;</span>)</span><br><span class="line">        pyplot.plot(histories[i].history[<span class="string">&#x27;accuracy&#x27;</span>], color=<span class="string">&#x27;blue&#x27;</span>, label=<span class="string">&#x27;train&#x27;</span>)</span><br><span class="line">        pyplot.plot(histories[i].history[<span class="string">&#x27;val_accuracy&#x27;</span>], color=<span class="string">&#x27;orange&#x27;</span>, label=<span class="string">&#x27;test&#x27;</span>)</span><br><span class="line">    pyplot.show()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># summarize model performance</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">summarize_performance</span>(<span class="params">scores</span>):</span></span><br><span class="line">    <span class="comment"># print summary</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Accuracy: mean=%.3f std=%.3f, n=%d&#x27;</span> % (np.mean(scores) * <span class="number">100</span>, np.std(scores) * <span class="number">100</span>, <span class="built_in">len</span>(scores)))</span><br><span class="line">    <span class="comment"># box and whisker plots of results</span></span><br><span class="line">    pyplot.boxplot(scores)</span><br><span class="line">    pyplot.show()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># run the test for evaluating a model</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run_test</span>():</span></span><br><span class="line">    <span class="comment"># load dataset</span></span><br><span class="line">    trainX, trainY, testX, testY = load_dataset()</span><br><span class="line">    <span class="comment"># prepare pixel data</span></span><br><span class="line">    trainX, testX = prep_pixels(trainX, testX)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># define model</span></span><br><span class="line">    model = define_model()</span><br><span class="line">    <span class="comment"># fit model</span></span><br><span class="line">    model.fit(trainX, trainY, epochs=<span class="number">10</span>, batch_size=<span class="number">32</span>, verbose=<span class="number">0</span>)</span><br><span class="line">    <span class="comment"># save model</span></span><br><span class="line">    model.save(<span class="string">&#x27;final_model.h5&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># evaluate model</span></span><br><span class="line">    scores, histories = evaluate_model(trainX, trainY)</span><br><span class="line">    <span class="comment"># learning curves</span></span><br><span class="line">    summarize_diagnostics(histories)</span><br><span class="line">    <span class="comment"># summarize estimated performance</span></span><br><span class="line">    summarize_performance(scores)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># load model</span></span><br><span class="line">    model = keras.models.load_model(<span class="string">&#x27;final_model.h5&#x27;</span>)</span><br><span class="line">    <span class="comment"># evaluate model on test dataset</span></span><br><span class="line">    _, acc = model.evaluate(testX, testY, verbose=<span class="number">0</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;&gt; %.3f&#x27;</span> % (acc * <span class="number">100.0</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># entry point, run the test harness</span></span><br><span class="line">run_test()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># make a prediction for a new image.</span></span><br><span class="line"><span class="keyword">import</span> keras</span><br><span class="line"></span><br><span class="line"><span class="comment"># load and prepare the image</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">load_image</span>(<span class="params">filename</span>):</span></span><br><span class="line">    <span class="comment"># load the image</span></span><br><span class="line">    img = keras.preprocessing.image.load_img(filename, grayscale=<span class="literal">True</span>, target_size=(<span class="number">28</span>, <span class="number">28</span>))</span><br><span class="line">    <span class="comment"># convert to array</span></span><br><span class="line">    img = keras.preprocessing.image.img_to_array(img)</span><br><span class="line">    <span class="comment"># reshape into a single sample with 1 channel</span></span><br><span class="line">    img = img.reshape(<span class="number">1</span>, <span class="number">28</span>, <span class="number">28</span>, <span class="number">1</span>)</span><br><span class="line">    <span class="comment"># prepare pixel data</span></span><br><span class="line">    img = img.astype(<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">    img = img / <span class="number">255.0</span></span><br><span class="line">    <span class="keyword">return</span> img</span><br><span class="line"></span><br><span class="line"><span class="comment"># make a prediction for a new image.</span></span><br><span class="line"><span class="comment"># load an image and predict the class</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">predict</span>():</span></span><br><span class="line">    <span class="comment"># load the image</span></span><br><span class="line">    img = load_image(<span class="string">&#x27;sample_image.png&#x27;</span>)</span><br><span class="line">    <span class="comment"># load model</span></span><br><span class="line">    model = keras.models.load_model(<span class="string">&#x27;final_model.h5&#x27;</span>)</span><br><span class="line">    <span class="comment"># predict the class</span></span><br><span class="line">    digit = model.predict_classes(img)</span><br><span class="line">    <span class="built_in">print</span>(digit[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># entry point, run the example</span></span><br><span class="line">predict()</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/06/16/convhull/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Starr">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Think like a man of action, act like a man of thought.">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/06/16/convhull/" class="post-title-link" itemprop="url">凸包</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-06-16 15:46:24 / Modified: 16:57:28" itemprop="dateCreated datePublished" datetime="2021-06-16T15:46:24+08:00">2021-06-16</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="什么是凸包"><a href="#什么是凸包" class="headerlink" title="什么是凸包"></a>什么是凸包</h3><p>凸包是计算几何中的概念。 在一个实数向量空间V中, 对于给定几何X,所有包含X的凸集的交集S被称为X的凸包。</p>
<h3 id="凸集"><a href="#凸集" class="headerlink" title="凸集"></a>凸集</h3><p>凸集（Convex set）是一个点集合，其中每两点之间的直线点都落在该点集合中。<br>凸多边形是: 如果把一个多边形的所有边中，有一条边向两方无限延长成为一直线时，其他各边都在此直线的同旁，那么这个多边形就叫做凸多边形。</p>
<h3 id="凸包的应用场景有哪些"><a href="#凸包的应用场景有哪些" class="headerlink" title="凸包的应用场景有哪些"></a>凸包的应用场景有哪些</h3><p>利用凸包计算二维平面的面积或者三维空间的体积。</p>
<h3 id="matlab中怎样使用凸包"><a href="#matlab中怎样使用凸包" class="headerlink" title="matlab中怎样使用凸包"></a>matlab中怎样使用凸包</h3><p>convhull和convhulln(N维凸包)函数返回最小的凸包边界。</p>
<p>二维</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">P = [<span class="number">0</span> <span class="number">0</span>; <span class="number">1</span> <span class="number">1</span>; <span class="number">1.5</span> <span class="number">0.5</span>; <span class="number">1.5</span> <span class="number">-0.5</span>; <span class="number">1.25</span> <span class="number">0.3</span>; <span class="number">1</span> <span class="number">0</span>; <span class="number">1.25</span> <span class="number">-0.3</span>; <span class="number">1</span> <span class="number">-1</span>];</span><br><span class="line">[k,av] = convhull(P);</span><br><span class="line"></span><br><span class="line"><span class="built_in">plot</span>(P(:, <span class="number">1</span>), P(:<span class="number">2</span>), <span class="string">&#x27;*&#x27;</span>)</span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line"><span class="built_in">plot</span>(P(k, <span class="number">1</span>), P(k, <span class="number">2</span>))</span><br></pre></td></tr></table></figure>
<p>三维</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[x,y,z] = meshgrid(-2:1:2, -2:1:2, -2:1:2);</span><br><span class="line">x = x(:);</span><br><span class="line">y = y(:);</span><br><span class="line">z = z(:);</span><br><span class="line"></span><br><span class="line">[k1, av1] = convhull(x, y, z);</span><br><span class="line">trisurf(k1, x, y, z, &#x27;FaceColor&#x27;, &#x27;cyan&#x27;);</span><br><span class="line">axis equal</span><br></pre></td></tr></table></figure>

<p>k是索引，以向量或矩阵形式返回。<br>对于二维点，k 是一个列向量，其中包含构成凸包的输入点的行索引，按逆时针排列。<br>对于三维点，k 是表示构成凸包的三角剖分的三列矩阵。每行表示三角剖分的一个分面。值表示输入点的行索引。<br>av是标量,面积或者体积</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>





</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Starr</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  




  





</body>
</html>
